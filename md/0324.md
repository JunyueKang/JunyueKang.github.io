# æ‰“é€ ä½ çš„ä¸“å±ç»ˆç«¯ï¼šæ— æ’ä»¶ç‰ˆ Oh My Bash/Oh My Zsh

---
å¤§å®¶åœ¨ä½¿ç”¨bashæˆ–zshçš„æ—¶å€™ï¼Œå¯èƒ½éƒ½ä¼šæƒ³è¦å®‰è£…ohmybash/ohmyzshè¿™æ ·çš„æ’ä»¶æ¥è®©ç»ˆç«¯å˜å¾—æ›´å¥½çœ‹ã€æ›´å¥½ç”¨ã€‚ä½†æ˜¯ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œå®‰è£…è¿™äº›æ’ä»¶åç»ˆç«¯å˜å¾—æœ‰ç‚¹å¡é¡¿äº†å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºè¿™äº›æ’ä»¶åœ¨å¯åŠ¨çš„æ—¶å€™ä¼šåŠ è½½å¾ˆå¤šé…ç½®æ–‡ä»¶ï¼Œå¯¼è‡´ç»ˆç«¯è¿è¡Œå˜æ…¢äº†ã€‚

ä¸è¿‡åˆ«æ‹…å¿ƒï¼å…¶å®æˆ‘ä»¬å®Œå…¨å¯ä»¥é€šè¿‡ä¿®æ”¹.bashrcæˆ–.zshrcé…ç½®æ–‡ä»¶æ¥å®ç°è¿™äº›æ’ä»¶çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œè€Œä¸”ä¸ä¼šè®©ç»ˆç«¯å˜å¾—é‚£ä¹ˆæ…¢ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä»¥bashä¸ºä¾‹ï¼Œä¸€æ­¥æ­¥åœ°æŠŠç»ˆç«¯æ‰“é€ å¾—æ—¢å¥½çœ‹åˆå¥½ç”¨~
## 1. å†å²è®°å½•è¡¥å…¨
ä¸‹é¢è¿™äº›é…ç½®ä»£ç å…¶å®åœ¨ä½ çš„.bashrcé‡Œå·²ç»æœ‰äº†ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥ç¨å¾®è°ƒæ•´ä¸€ä¸‹è®©å®ƒå˜å¾—æ›´å¥½ç”¨ã€‚
```bash
# don't put duplicate lines or lines starting with space in the history.
# See bash(1) for more options
HISTCONTROL=ignoreboth   # å¿½ç•¥é‡å¤å‘½ä»¤å’Œä»¥ç©ºæ ¼å¼€å¤´çš„å‘½ä»¤

# append to the history file, don't overwrite it
shopt -s histappend # å°†å‘½ä»¤è¿½åŠ åˆ°å†å²æ–‡ä»¶ï¼Œè€Œéè¦†ç›–

# for setting history length see HISTSIZE and HISTFILESIZE in bash(1)
HISTSIZE=1000  # å†…å­˜ä¸­çš„å†å²è®°å½•æ¡æ•°
HISTFILESIZE=2000 # å†å²æ–‡ä»¶ä¸­çš„å†å²è®°å½•æ¡æ•°

# check the window size after each command and, if necessary,
# update the values of LINES and COLUMNS.
shopt -s checkwinsize # æ¯æ¬¡å‘½ä»¤åæ£€æŸ¥çª—å£å¤§å°å¹¶è‡ªåŠ¨è°ƒæ•´
```
è¿™é‡Œçš„HISTSIZEå’ŒHISTFILESIZEæ•°å€¼å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è°ƒæ•´ï¼Œæ¯”å¦‚æˆ‘å°±å–œæ¬¢è®¾ç½®å¾—å¤§ä¸€ç‚¹ï¼Œè¿™æ ·å°±èƒ½è®°ä½æ›´å¤šä»¥å‰ç”¨è¿‡çš„å‘½ä»¤äº†

æ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªè¶…çº§å®ç”¨çš„å°æŠ€å·§ï¼Œå¯ä»¥è®©ä¸Šä¸‹ç®­å¤´é”®å˜å¾—æ›´æ™ºèƒ½ï¼š
```bash
# å¯ç”¨ä¸Š/ä¸‹ç®­å¤´é”®çš„å‰ç¼€å†å²æœç´¢
bind '"\e[A": history-search-backward'
bind '"\e[B": history-search-forward'
```
è¿™ä¸¤è¡Œä»£ç çš„ä½œç”¨æ˜¯ï¼š
```txt
1. bind '"\e[A": history-search-backward' - å°†ä¸Šç®­å¤´é”®ï¼ˆ \e[A ï¼‰ç»‘å®šåˆ° history-search-backward åŠŸèƒ½
2. bind '"\e[B": history-search-forward' - å°†ä¸‹ç®­å¤´é”®ï¼ˆ \e[B ï¼‰ç»‘å®šåˆ° history-search-forward åŠŸèƒ½
```
åœ¨.bashrcä¸­æ·»åŠ è¿™ä¸¤è¡Œä»£ç ï¼Œä½ å°±å¯ä»¥è¿™æ ·ä½¿ç”¨äº†ï¼š
1. å…ˆè¾“å…¥å‘½ä»¤çš„å¼€å¤´å‡ ä¸ªå­—æ¯ï¼ˆæ¯”å¦‚ 'git'ï¼‰
2. ç„¶åæŒ‰ä¸Šç®­å¤´é”®ï¼Œç»ˆç«¯å°±ä¼šè‡ªåŠ¨æ‰¾åˆ°ä¹‹å‰ç”¨è¿‡çš„ä»¥'git'å¼€å¤´çš„å‘½ä»¤
3. ç»§ç»­æŒ‰ä¸Šç®­å¤´é”®å°±ä¼šæ˜¾ç¤ºæ›´æ—©çš„åŒ¹é…å‘½ä»¤
4. æŒ‰ä¸‹ç®­å¤´é”®åˆ™å¯ä»¥å¾€å›ç¿»
æ˜¯ä¸æ˜¯å¾ˆæ–¹ä¾¿å‘¢ï¼Ÿå†ä¹Ÿä¸ç”¨ä¸€ä¸ªä¸ªç¿»å†å²è®°å½•äº†ã€‚


## 2.è‡ªå®šä¹‰ä¸»é¢˜é…ç½®

è¯´åˆ°ç»ˆç«¯ä¸»é¢˜ï¼Œå¤§å®¶æœ€ç†Ÿæ‚‰çš„å¯èƒ½å°±æ˜¯è¿™æ ·çš„æ ·å¼ï¼š
```bash
user@hostname:~$
```
è¿™æ˜¯bashé»˜è®¤çš„æç¤ºç¬¦ï¼Œå…¶ä¸­ ~ è¡¨ç¤ºä½ ç°åœ¨åœ¨è‡ªå·±çš„ä¸»ç›®å½•é‡Œã€‚
å¦‚æœä½ æ˜¯Pythonç”¨æˆ·ï¼Œå®‰è£…äº†Anacondaçš„è¯ï¼Œå¯èƒ½ä¼šçœ‹åˆ°è¿™æ ·çš„æç¤ºç¬¦ï¼š
```bash
(base)user@hostname:~$
```
å¼€å¤´çš„ (base) å‘Šè¯‰ä½ å½“å‰æ­£åœ¨ä½¿ç”¨condaçš„baseç¯å¢ƒï¼Œä¸è¿‡è¿™æ ·çš„æç¤ºç¬¦çœ‹èµ·æ¥æœ‰ç‚¹å•è°ƒï¼Œè€Œä¸”ä¿¡æ¯ä¹Ÿä¸å¤Ÿä¸°å¯Œã€‚åˆ«ç€æ€¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥æ‰“é€ ä¸€ä¸ªè¶…é…·çš„è‡ªå®šä¹‰ä¸»é¢˜ã€‚é€šè¿‡ä¿®æ”¹.bashrcæ–‡ä»¶ä¸­çš„PS1å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥è®©ç»ˆç«¯å˜å¾—æ—¢å¥½çœ‹åˆå®ç”¨ã€‚


çœ‹çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬è¦å®ç°çš„æ•ˆæœï¼š
![alt text](./Snipaste_2025-03-27_00-35-28.png)
æ˜¯ä¸æ˜¯çœ‹èµ·æ¥å¾ˆæ£’ï¼ŸğŸ˜Š æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€æ­¥æ­¥æ¥å®ç°å®ƒï¼



### 2.1 è®©ç»ˆç«¯æ”¯æŒæ›´å¤šé¢œè‰²
é¦–å…ˆè¦è®©ç»ˆç«¯æ”¯æŒæ›´ä¸°å¯Œçš„é¢œè‰²æ˜¾ç¤ºï¼Œè¿™æ ·æˆ‘ä»¬çš„ä¸»é¢˜æ‰èƒ½äº”å½©ç¼¤çº·ï¼Œéœ€è¦åœ¨.bashrcæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š
```bash
# ç»ˆç«¯é¢œè‰²è®¾ç½®
if [[ $COLORTERM = gnome-* && $TERM = xterm ]] && infocmp gnome-256color &>/dev/null; then
  export TERM=gnome-256color
elif [[ $TERM != dumb ]] && infocmp xterm-256color &>/dev/null; then
  export TERM=xterm-256color
fi
```

è‡ªå®šä¹‰æˆ‘ä»¬æƒ³è¦ä½¿ç”¨çš„é¢œè‰²å˜é‡ï¼Œä¾‹å¦‚ï¼š
```bash
# å®šä¹‰é¢œè‰²å˜é‡
MAGENTA='\[\e[1;31m\]'     # çº¢
YELLOW='\[\e[1;33m\]'      # é»„
WHITE='\[\e[1;37m\]'       # ç™½
ORANGE='\[\e[38;5;172m\]'  # æ©™è‰²
CYAN='\[\e[1;36m\]'        # é’
BLUE='\[\e[1;34m\]'        # è“
PURPLE='\[\e[1;35m\]'      # ç´«
RESET='\[\e[0m\]'          # é‡ç½®
```
è¿™äº›é¢œè‰²ä»£ç çœ‹èµ·æ¥å¯èƒ½æœ‰ç‚¹å¤æ‚ï¼Œä¸è¿‡åˆ«æ‹…å¿ƒï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹å®ƒä»¬çš„æ ¼å¼ï¼Œè¿™äº›é¢œè‰²ä»£ç ä½¿ç”¨çš„æ˜¯ANSIè½¬ä¹‰åºåˆ—ï¼š
```txt
\[ å’Œ \] æ˜¯Bashç‰¹æœ‰çš„æ ‡è®°ï¼Œå‘Šè¯‰bashè¿™äº›å­—ç¬¦ä¸æ˜¯çœŸçš„è¦æ˜¾ç¤ºå‡ºæ¥çš„
\e[ æ˜¯è½¬ä¹‰åºåˆ—çš„å¼€å§‹ï¼Œæ˜¯é¢œè‰²è®¾ç½®çš„å¼€å§‹æ ‡è®°
1; è¡¨ç¤ºåŠ ç²—æ–‡æœ¬
åé¢çš„æ•°å­—å°±æ˜¯å…·ä½“çš„é¢œè‰²ä»£ç ï¼Œæ¯”å¦‚31må°±æ˜¯çº¢è‰²
m è¡¨ç¤ºè½¬ä¹‰åºåˆ—çš„ç»“æŸ
æœ€ç‰¹åˆ«çš„æ˜¯æ©™è‰²ï¼Œå®ƒç”¨äº†256è‰²æ¨¡å¼ï¼Œæ‰€ä»¥æ ¼å¼ç¨å¾®ä¸åŒä¸€äº›
```


### 2.2ç»ˆç«¯æ ‡é¢˜æ è®¾ç½®

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è®¾ç½®ç»ˆç«¯çª—å£çš„æ ‡é¢˜æ ï¼Œè¿™æ ·ä½ å°±èƒ½ä¸€çœ¼çœ‹åˆ°å½“å‰åœ¨å“ªä¸ªç›®å½•å•¦ï¼š
```bash
case $TERM in
    xterm*|rxvt*)
        TITLEBAR='\[\e]0;\w\a\]'
        ;;
    *)
        TITLEBAR=""
        ;;
esac
```

è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªcaseè¯­å¥æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼š



è¿™æ ·è®¾ç½®ä¹‹åï¼Œåœ¨æ”¯æŒçš„ç»ˆç«¯é‡Œï¼Œä½ å°±èƒ½åœ¨æ ‡é¢˜æ çœ‹åˆ°å½“å‰ç›®å½•çš„è·¯å¾„å•¦ï¼æ¯”å¦‚åœ¨VSCodeçš„ç»ˆç«¯æˆ–è€…iTerm2é‡Œéƒ½å¯ä»¥ğŸ˜Šï¼ˆæ¨èä¸€ä¸‹[ghosttyç»ˆç«¯](https://github.com/ghostty-org/ghostty)ï¼‰
1. `case $TERM in` 
   è¿™è¡Œä»£ç ä¼šæ£€æŸ¥ä½ å½“å‰ä½¿ç”¨çš„ç»ˆç«¯ç±»å‹ã€‚å°±åƒé—®"ä½ ç”¨çš„æ˜¯ä»€ä¹ˆç»ˆç«¯å‘€ï¼Ÿ"

2. `xterm*|rxvt*)`
   è¿™æ˜¯åœ¨åŒ¹é…ç»ˆç«¯ç±»å‹åç§°ï¼š
   - `xterm*` åŒ¹é…æ‰€æœ‰ä»¥xtermå¼€å¤´çš„ç»ˆç«¯ï¼Œæ¯”å¦‚xtermã€xterm-256color
   - `|` è¡¨ç¤º"æˆ–è€…"
   - `rxvt*` åŒ¹é…æ‰€æœ‰ä»¥rxvtå¼€å¤´çš„ç»ˆç«¯
   
3. `TITLEBAR='\[\e]0;\w\a\]'`
   å¦‚æœæ˜¯ä¸Šé¢è¿™äº›ç»ˆç«¯ç±»å‹ï¼Œå°±è®¾ç½®ä¸€ä¸ªç‰¹æ®Šçš„æ ‡é¢˜æ æ ¼å¼ï¼š
   - è¿™ä¸ªæ ¼å¼ä¼šåœ¨æ ‡é¢˜æ æ˜¾ç¤ºä½ å½“å‰çš„å·¥ä½œç›®å½•
   - è¿™æ ·ä½ æ‰“å¼€å¾ˆå¤šç»ˆç«¯çª—å£æ—¶ï¼Œä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¯ä¸ªçª—å£åœ¨å“ªä¸ªç›®å½•~

4. `;;`
   è¡¨ç¤ºè¿™ä¸ªé€‰é¡¹çš„è®¾ç½®åˆ°æ­¤ç»“æŸå•¦

5. `*)`
   è¿™ä¸ªæ˜Ÿå·è¡¨ç¤º"å…¶ä»–æ‰€æœ‰æƒ…å†µ"ï¼Œå°±åƒæ˜¯åœ¨è¯´"å¦‚æœéƒ½ä¸æ˜¯ä¸Šé¢çš„ç»ˆç«¯ç±»å‹..."

6. `TITLEBAR=""`
   å¯¹äºå…¶ä»–ç±»å‹çš„ç»ˆç«¯ï¼Œå°±ä¸è®¾ç½®æ ‡é¢˜æ äº†ï¼ˆå› ä¸ºå¯èƒ½ä¸æ”¯æŒè¿™ä¸ªåŠŸèƒ½ï¼‰

7. `esac`
   caseè¯­å¥ç»“æŸï¼Œesacå°±æ˜¯caseå€’ç€å†™ï¼ˆå¾ˆæœ‰è¶£å§ï¼ï¼‰
è¿™æ®µä»£ç ä¼šæ ¹æ®ä½ çš„ç»ˆç«¯ç±»å‹æ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºæ ‡é¢˜æ ã€‚ä½¿ç”¨ä¹‹åï¼Œä½ ä¼šå‘ç°ï¼š

- åœ¨ä¸»ç›®å½•æ—¶ï¼Œæ ‡é¢˜æ æ˜¾ç¤ºä¸€ä¸ªç®€å•çš„ ~
- åœ¨å…¶ä»–ç›®å½•æ—¶ï¼Œæ¯”å¦‚ /var/log ï¼Œæ ‡é¢˜æ ä¼šæ˜¾ç¤ºå®Œæ•´çš„è·¯å¾„ï¼Œå†ä¹Ÿä¸ä¼šå¿˜è®°è‡ªå·±åœ¨å“ªä¸ªç›®å½•äº† ğŸ˜„


### 2.3 Screenä¼šè¯ä¿¡æ¯
è™½ç„¶ç°åœ¨æœ‰å¾ˆå¤šç°ä»£çš„ç»ˆç«¯å¤ç”¨å·¥å…·ï¼ˆæ¯”å¦‚tmuxæˆ–zellijï¼‰ï¼Œä½†æ˜¯å¯¹äºä¸€äº›ç®€å•çš„åå°ä»»åŠ¡ï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢ç”¨screenã€‚å®ƒå°±åƒä¸€ä¸ªè½»é‡çº§çš„"çª—å£ç®¡ç†å™¨"ï¼Œç‰¹åˆ«é€‚åˆé‚£äº›ä½ åªéœ€è¦æŒ‚ç€è·‘ã€ä¸ç”¨ç»å¸¸æŸ¥çœ‹çš„ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™é‡Œä¹Ÿè®¾ç½®ä¸€ä¸‹screençš„æ ‡é¢˜æ ã€‚
```bash
function screen_info() {
    if [[ -n "$STY" ]]; then
        echo -e "${MAGENTA}[screen:${STY##*.}]${RESET}"
    fi
}
```
è¿™ä¸ªå‡½æ•°æ£€æµ‹å½“å‰æ˜¯å¦åœ¨GNU Screenä¼šè¯ä¸­ï¼Œå¦‚æœæ˜¯åˆ™æ˜¾ç¤ºä¼šè¯ä¿¡æ¯ï¼š
```txt
-n "$STY" æ£€æŸ¥æ˜¯å¦å­˜åœ¨Screenä¼šè¯
${STY##*.} æå–Screenä¼šè¯çš„ç¼–å·
è¾“å‡ºæ ¼å¼ä¸ºçº¢è‰²çš„ [screen:ä¼šè¯ç¼–å·]
```
è¿™æ ·ä½ æ‰“å¼€å¤šä¸ªscreençª—å£æ—¶ï¼Œä¸€çœ¼å°±èƒ½åˆ†æ¸…æ¥šåœ¨å“ªä¸ªä¼šè¯é‡Œäº†ã€‚


### 2.4 Gitåˆ†æ”¯æ£€æµ‹
è¿™ä¸ªå¯èƒ½æ˜¯æœ€å®ç”¨çš„åŠŸèƒ½ä¹‹ä¸€äº†ï¼Œå¯¹äºæˆ‘ä»¬è¿™äº›ç»å¸¸ä½¿ç”¨Gitçš„æ¥è¯´ï¼Œå®æ—¶çŸ¥é“Gitä»“åº“çš„çŠ¶æ€ç‰¹åˆ«é‡è¦ï¼š
```bash
# Gitåˆ†æ”¯æ£€æµ‹
function git_branch() {
    local branch  # å£°æ˜å±€éƒ¨å˜é‡ï¼Œé¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´
    if branch=$(git rev-parse --abbrev-ref HEAD 2>/dev/null); then
        if [[ "$branch" == "HEAD" ]]; then
            branch="detached*"
        fi
        # æ£€æŸ¥ git çŠ¶æ€
        local git_status
        if git diff --quiet 2>/dev/null >/dev/null && git diff --staged --quiet 2>/dev/null >/dev/null; then
            git_status="âœ”"
        else
            git_status="âœ˜"
        fi
        echo -e "${BLUE} |git:${branch} ${git_status}|"
    fi
}
```
è¿™ä¸ªåŠŸèƒ½ä¼šå‘Šè¯‰ä½ ï¼š

- ä½ ç°åœ¨åœ¨å“ªä¸ªåˆ†æ”¯ä¸Š
- ç”¨âœ”è¡¨ç¤ºæ‰€æœ‰æ”¹åŠ¨éƒ½å·²æäº¤
- ç”¨âœ˜æé†’ä½ è¿˜æœ‰æœªæäº¤çš„æ”¹åŠ¨

è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªGitæ£€æµ‹åŠŸèƒ½çš„æ¯ä¸ªéƒ¨åˆ†æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼š

1. é¦–å…ˆï¼Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªå«`branch`çš„å±€éƒ¨å˜é‡
   - è¿™æ ·åšæ˜¯ä¸ºäº†ä¿æŒæ•´æ´ï¼Œä¸ä¼šå½±å“åˆ°å…¶ä»–åœ°æ–¹çš„å˜é‡
   - å°±åƒæ˜¯ç»™è¿™ä¸ªåˆ†æ”¯åå­—å‡†å¤‡ä¸€ä¸ªä¸“é—¨çš„å°æŠ½å±‰

2. è·å–Gitåˆ†æ”¯åç§°
   - ä½¿ç”¨`git rev-parse --abbrev-ref HEAD`å‘½ä»¤
   - åŠ ä¸Š`--abbrev-ref`å‚æ•°æ˜¯ä¸ºäº†æ˜¾ç¤ºå‹å¥½çš„åˆ†æ”¯å
   - æ¯”å¦‚æ˜¾ç¤º`main`è€Œä¸æ˜¯ä¸€ä¸²çœ‹ä¸æ‡‚çš„æ•°å­—å’Œå­—æ¯
   - `2>/dev/null`çš„ä½œç”¨æ˜¯æ‚„æ‚„å¤„ç†é”™è¯¯ä¿¡æ¯ï¼Œè¿™æ ·åœ¨éGitç›®å½•ä¸‹å°±ä¸ä¼šæ˜¾ç¤ºçƒ¦äººçš„é”™è¯¯æç¤ºå•¦

3. ç‰¹æ®Šæƒ…å†µå¤„ç†
   - å¦‚æœä½ ä¸å°å¿ƒè¿›å…¥äº†"åˆ†ç¦»å¤´æŒ‡é’ˆ"çŠ¶æ€ï¼ˆå°±æ˜¯æ²¡æœ‰åœ¨ä»»ä½•åˆ†æ”¯ä¸Šï¼‰
   - Gitä¼šè¿”å›"HEAD"è¿™ä¸ªè¯
   - æˆ‘ä»¬æŠŠå®ƒæ”¹æˆæ›´å‹å¥½çš„"detached*"æç¤º
   - è¿™æ ·ä½ ä¸€çœ¼å°±èƒ½çœ‹å‡ºç°åœ¨çš„çŠ¶æ€ä¸å¤ªå¯¹åŠ²

4. GitçŠ¶æ€æ£€æŸ¥
   - ä½¿ç”¨`git diff --quiet`æ£€æŸ¥æ˜¯å¦æœ‰æ”¹åŠ¨æ²¡æœ‰æäº¤
   - å¦‚æœæ‰€æœ‰æ”¹åŠ¨éƒ½å·²ç»æäº¤äº†ï¼Œæ˜¾ç¤ºä¸€ä¸ªå¼€å¿ƒçš„âœ”
   - å¦‚æœè¿˜æœ‰æ”¹åŠ¨æ²¡æäº¤ï¼Œæ˜¾ç¤ºä¸€ä¸ªæé†’çš„âœ˜
   - è¿™å°±åƒæ˜¯ä¸€ä¸ªå°åŠ©æ‰‹ï¼Œæ—¶åˆ»æé†’ä½ ä»£ç çš„çŠ¶æ€~

æœ€ç»ˆæ•ˆæœï¼š
- åœ¨Gitä»“åº“é‡Œæ—¶ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼`|git:main âœ”|`è¿™æ ·çš„æç¤º
- è“è‰²æ˜¾ç¤ºï¼Œç‰¹åˆ«é†’ç›®
- ä¸€çœ¼å°±èƒ½çœ‹å‡ºï¼š
  - å½“å‰åœ¨å“ªä¸ªåˆ†æ”¯
  - æ˜¯å¦æœ‰æœªæäº¤çš„æ”¹åŠ¨
  - æ˜¯å¦å¤„äºç‰¹æ®ŠçŠ¶æ€



### 2.5 venv/condaç¯å¢ƒæ£€æµ‹
è¿™ä¸ªå‡½æ•°ç”¨äºæ£€æµ‹å¹¶æ˜¾ç¤ºå½“å‰æ¿€æ´»çš„Pythonè™šæ‹Ÿç¯å¢ƒä¿¡æ¯ï¼Œå®ƒå¯ä»¥åŒæ—¶æ”¯æŒæ ‡å‡†çš„Python virtualenvå’ŒAnacondaç¯å¢ƒã€‚
```bash
function conda_venv() {
    if [[ -n "$VIRTUAL_ENV" ]]; then
        echo -e "${WHITE}(venv:${PURPLE}$(basename $VIRTUAL_ENV)${WHITE}) "
    elif [[ -n "$CONDA_DEFAULT_ENV" ]]; then
        echo -e "${WHITE}(conda:${PURPLE}$(basename $CONDA_DEFAULT_ENV)${WHITE}) "
    fi
}
```
å®ƒä¼šï¼š

1. å…ˆæ£€æŸ¥æ˜¯å¦åœ¨æ ‡å‡†çš„Pythonè™šæ‹Ÿç¯å¢ƒä¸­
   
   - é€šè¿‡æ£€æŸ¥ $VIRTUAL_ENV å˜é‡æ˜¯å¦å­˜åœ¨
   - å¦‚æœå­˜åœ¨ï¼Œæ˜¾ç¤ºç±»ä¼¼ (venv:é¡¹ç›®ç¯å¢ƒ) è¿™æ ·çš„æç¤º
2. å¦‚æœä¸æ˜¯virtualenvï¼Œå†æ£€æŸ¥æ˜¯å¦åœ¨condaç¯å¢ƒä¸­
   
   - é€šè¿‡æ£€æŸ¥ $CONDA_DEFAULT_ENV å˜é‡
   - å¦‚æœå­˜åœ¨ï¼Œæ˜¾ç¤ºç±»ä¼¼ (conda:base) è¿™æ ·çš„æç¤º
3. ä½¿ç”¨ basename å‘½ä»¤æå–ç¯å¢ƒåç§°
   
   - è¿™æ ·å°±ä¸ä¼šæ˜¾ç¤ºå†—é•¿çš„å®Œæ•´è·¯å¾„
   - åªæ˜¾ç¤ºæœ€åä¸€çº§ç›®å½•åï¼Œç®€æ´æ˜äº†
  
è¿™æ ·è®¾ç½®åï¼Œä½ éšæ—¶éƒ½èƒ½æ¸…æ¥šåœ°çŸ¥é“ï¼š
- å½“å‰æ˜¯å¦åœ¨è™šæ‹Ÿç¯å¢ƒä¸­
- æ˜¯å“ªç§ç±»å‹çš„è™šæ‹Ÿç¯å¢ƒï¼ˆvenvè¿˜æ˜¯condaï¼‰
- ç¯å¢ƒçš„åç§°æ˜¯ä»€ä¹ˆ



### 2.6 è‡ªå®šä¹‰æ—¶é—´æ˜¾ç¤º
æ¯æ¬¡æ‰§è¡Œå‘½ä»¤æ—¶çŸ¥é“å…·ä½“æ—¶é—´å¾ˆæœ‰ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨åšä¸€äº›è€—æ—¶æ“ä½œæˆ–è€…è®°å½•æ“ä½œæ—¥å¿—çš„æ—¶å€™ã€‚æ¥çœ‹çœ‹è¿™ä¸ªç®€æ´åˆå®ç”¨çš„æ—¶é’Ÿæ˜¾ç¤ºåŠŸèƒ½ï¼š
```bash
# è‡ªå®šä¹‰æ—¶é—´æ˜¾ç¤º
function my_clock() {
    echo -e "${ORANGE}--$(date +%H:%M:%S)--${RESET}"
}
```

```txt
${ORANGE} ä½¿ç”¨ä¹‹å‰å®šä¹‰çš„æ©™è‰²
-- è£…é¥°æ€§çš„æ¨ªçº¿ ï¼ˆç”¨ä¸¤ä¸ªå°æ¨ªçº¿æŠŠæ—¶é—´æ¡†èµ·æ¥ï¼Œè®©å®ƒçœ‹èµ·æ¥æ›´æœ‰æ¸…æ¥šï¼‰
$(date +%H:%M:%S) è·å–å½“å‰ç³»ç»Ÿæ—¶é—´
-- ç»“å°¾çš„è£…é¥°æ€§æ¨ªçº¿
${RESET} æœ€åè®°å¾—é‡ç½®é¢œè‰²ï¼Œè¿™æ ·ä¸ä¼šå½±å“åé¢çš„æ–‡å­—æ˜¾ç¤º
```

### 2.7 æŠŠæ‰€æœ‰åŠŸèƒ½ç»„åˆåœ¨ä¸€èµ·

ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†æ‰€æœ‰çš„ç»„ä»¶ï¼Œæ˜¯æ—¶å€™æŠŠå®ƒä»¬ç»„åˆæˆä¸€ä¸ªæ¼‚äº®çš„æç¤ºç¬¦äº†ï¼è¿™ä¸ªéƒ¨åˆ†å°±åƒæ˜¯åœ¨æ­ç§¯æœ¨ï¼Œæˆ‘ä»¬æŠŠå‰é¢åšå¥½çš„æ¯ä¸ªåŠŸèƒ½éƒ½æ‹¼åœ¨ä¸€èµ·ï¼š
```bash
function build_prompt() {
    PS1="${TITLEBAR}$(screen_info)$(my_clock) ${YELLOW}\u ${WHITE}in ${CYAN}\w$(git_branch) $(conda_venv)\n${WHITE}\$ ${RESET}"
}
#è®¾ç½®PROMPT_COMMAND
PROMPT_COMMAND=build_prompt
#ç¡®ä¿æç¤ºç¬¦æ¯æ¬¡æ›´æ–°
export PROMPT_COMMAND
```
è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ª"ç§¯æœ¨"æ˜¯æ€ä¹ˆæ­èµ·æ¥çš„ï¼š
```txt
build_prompt() å‡½æ•°çš„ä½œç”¨æ˜¯æ„å»º bash çš„æç¤ºç¬¦ï¼Œå®ƒé€šè¿‡è®¾ç½® PS1 å˜é‡æ¥å®ç°ã€‚PS1 å˜é‡çš„ç»„æˆéƒ¨åˆ†å¦‚ä¸‹ï¼š

${TITLEBAR} è®¾ç½®ç»ˆç«¯çª—å£çš„æ ‡é¢˜æ 
$(screen_info) å¦‚æœåœ¨ screen ä¼šè¯ä¸­ï¼Œæ˜¾ç¤ºä¼šè¯ä¿¡æ¯
$(my_clock) æ˜¾ç¤ºå½“å‰æ—¶é—´
${YELLOW}\u é»„è‰²æ˜¾ç¤ºå½“å‰ç”¨æˆ·åï¼ˆ\u æ˜¯ç”¨æˆ·åçš„ç‰¹æ®Šç¬¦å·ï¼‰
${WHITE}in ç™½è‰²æ˜¾ç¤ºå•è¯ "in"
${CYAN}\w é’è‰²æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•ï¼ˆ\w æ˜¯å½“å‰ç›®å½•çš„ç‰¹æ®Šç¬¦å·ï¼‰
$(git_branch) å¦‚æœåœ¨ git ä»“åº“ä¸­ï¼Œæ˜¾ç¤ºåˆ†æ”¯ä¿¡æ¯
$(conda_venv) å¦‚æœåœ¨ Python è™šæ‹Ÿç¯å¢ƒä¸­ï¼Œæ˜¾ç¤ºç¯å¢ƒä¿¡æ¯
\n æ¢è¡Œç¬¦ (ä¸ºäº†å°†$æˆ–#æç¤ºç¬¦ç§»åˆ°ä¸‹ä¸€è¡Œ)
${WHITE}\$ ç™½è‰²æ˜¾ç¤ºæç¤ºç¬¦ç¬¦å·ï¼ˆæ™®é€šç”¨æˆ·æ˜¯ $ï¼Œroot ç”¨æˆ·æ˜¯ #ï¼‰
${RESET} é‡ç½®æ‰€æœ‰é¢œè‰²è®¾ç½®
```
è¿˜éœ€è¦ï¼š
```bash
# è®¾ç½®PROMPT_COMMANDï¼Œè®©æç¤ºç¬¦éšæ—¶æ›´æ–°
PROMPT_COMMAND=build_prompt
# å¯¼å‡ºè¿™ä¸ªè®¾ç½®ï¼Œè®©å­shellä¹Ÿèƒ½ç»§æ‰¿
export PROMPT_COMMAND
```
è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š

- æ¯æ¬¡ä½ è¾“å…¥å‘½ä»¤å‰ï¼Œæç¤ºç¬¦éƒ½ä¼šè‡ªåŠ¨æ›´æ–°
- æ—¶é—´ã€GitçŠ¶æ€ç­‰ä¿¡æ¯éƒ½æ˜¯å®æ—¶çš„
- å³ä½¿ä½ æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£ï¼Œè®¾ç½®ä¹Ÿä¼šä¿æŒä¸€è‡´

æœ€ç»ˆæ•ˆæœå°±åƒä¸€ä¸ªè´´å¿ƒçš„å°åŠ©æ‰‹ï¼š
- å‘Šè¯‰ä½ ç°åœ¨å‡ ç‚¹äº†
- æé†’ä½ åœ¨å“ªä¸ªç›®å½•
- ç›‘æ§ç€Gitçš„çŠ¶æ€
- è®°ä½ä½ ç”¨çš„æ˜¯å“ªä¸ªPythonç¯å¢ƒ

å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼Œåªéœ€æ·»åŠ åˆ°.bashrcæ–‡ä»¶ä¸­å³å¯ä¸å®‰è£…oh-my-bashæ’ä»¶è€Œä½¿ç”¨è¯¥è‡ªå®šä¹‰ä¸»é¢˜ï¼š

```bash
# ~/.bashrc è‡ªå®šä¹‰ä¸»é¢˜é…ç½®

# ç»ˆç«¯é¢œè‰²è®¾ç½®
if [[ $COLORTERM = gnome-* && $TERM = xterm ]] && infocmp gnome-256color &>/dev/null; then
  export TERM=gnome-256color
elif [[ $TERM != dumb ]] && infocmp xterm-256color &>/dev/null; then
  export TERM=xterm-256color
fi

# å®šä¹‰é¢œè‰²å˜é‡ï¼ˆåŠ ç²—ç‰ˆæœ¬ï¼‰
MAGENTA='\[\e[1;31m\]'     # äº®çº¢
YELLOW='\[\e[1;33m\]'      # é»„
WHITE='\[\e[1;37m\]'       # ç™½
ORANGE='\[\e[38;5;172m\]'  # æ©™è‰²ï¼ˆä½¿ç”¨256è‰²ï¼‰
CYAN='\[\e[1;36m\]'        # é’
BLUE='\[\e[1;34m\]'        # è“
PURPLE='\[\e[1;35m\]'      # ç´«
RESET='\[\e[0m\]'          # é‡ç½®

# ç»ˆç«¯æ ‡é¢˜æ è®¾ç½®
case $TERM in
    xterm*|rxvt*)
        TITLEBAR='\[\e]0;\w\a\]'
        ;;
    *)
        TITLEBAR=""
        ;;
esac

# Screenä¼šè¯ä¿¡æ¯æ£€æµ‹
function screen_info() {
    if [[ -n "$STY" ]]; then
        echo -e "${MAGENTA}[screen:${STY##*.}]${RESET}"
    fi
}

# Gitåˆ†æ”¯æ£€æµ‹
function git_branch() {
    local branch  # å£°æ˜å±€éƒ¨å˜é‡ï¼Œé¿å…æ±¡æŸ“å…¨å±€å‘½åç©ºé—´
    if branch=$(git rev-parse --abbrev-ref HEAD 2>/dev/null); then
        if [[ "$branch" == "HEAD" ]]; then
            branch="detached*"
        fi
        # æ£€æŸ¥ git çŠ¶æ€
        local git_status
        if git diff --quiet 2>/dev/null >/dev/null && git diff --staged --quiet 2>/dev/null >/dev/null; then
            git_status="âœ”"
        else
            git_status="âœ˜"
        fi
        echo -e "${BLUE} |git:${branch} ${git_status}|"
    fi
}

# Pythonè™šæ‹Ÿç¯å¢ƒæ£€æµ‹
function python_venv() {
    if [[ -n "$VIRTUAL_ENV" ]]; then
        echo -e "${WHITE}(venv:${PURPLE}$(basename $VIRTUAL_ENV)${WHITE}) "
    elif [[ -n "$CONDA_DEFAULT_ENV" ]]; then
        echo -e "${WHITE}(conda:${PURPLE}$(basename $CONDA_DEFAULT_ENV)${WHITE}) "
    fi
}

# è‡ªå®šä¹‰æ—¶é—´æ˜¾ç¤º
function my_clock() {
    echo -e "${ORANGE}--$(date +%H:%M:%S)--${RESET}"
}

# æ„å»ºæç¤ºç¬¦
function build_prompt() {
    PS1="${TITLEBAR}$(screen_info)$(my_clock) ${YELLOW}\u ${WHITE}in ${CYAN}\w$(git_branch) $(python_venv)\n${WHITE}\$ ${RESET}"
}

# è®¾ç½®PROMPT_COMMAND
PROMPT_COMMAND=build_prompt

# ç¡®ä¿æç¤ºç¬¦æ¯æ¬¡æ›´æ–°
export PROMPT_COMMAND

```



